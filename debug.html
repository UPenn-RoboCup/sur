<!DOCTYPE html>
<!--HTML5 doctype-->
<html lang="en">
     
<head>
  <title>SUR Commander</title>
  <meta charset="utf-8">
  
  <script src="lib/jquery-1.9.1.js"></script>
  
  <script>
  var host = window.document.location.host.replace(/:.*/, '');
  if( host.length==0 ){ host = "localhost"; }
  var URL = window.URL || window.webkitURL;
  </script>
  
  <script>
  /* Setup the websocket connection */
  var op_port = 9001;
  var op_ws;
  document.addEventListener( "DOMContentLoaded", function(){
    var op_host = 'ws://' + host + ':' + op_port;
    console.log('Starting connection...')
    op_ws = new WebSocket(op_host);
    console.log(op_host);
    op_ws.open = function(e){
      console.log('connected!')
    }
    op_ws.onerror = function(e) {
      console.log('error',e)
    }
    op_ws.onclose = function(e) {
      console.log('close',e)
    }
    // Grab messages from the operator
    op_ws.onmessage = function(e){
      if(typeof e.data === "string"){
        var op_data   = JSON.parse(e.data)
        var recv_time = e.timeStamp/1e6;
        var latency   = recv_time - fr_metadata.t
        console.log('Operator Latency: '+latency*1000+'ms')
        console.log(data);
        return;
      }
    }; //onmessage
    
  });
  </script>
  
  <script>
  document.addEventListener( "DOMContentLoaded", function(){
    var get_url = 'http://'+host+':8080/vcm/head_lidar/mesh_resolution';
    $.get(get_url,function(data,status,xhr){
      console.log(data,status,xhr);
    })
  });
  </script>
  
  <script>
  document.addEventListener( "DOMContentLoaded", function(){
    var put_url  = 'http://' + host + ':8080/vcm/head_lidar/mesh_resolution';
    var value     = [600,480];
    var put_data = 'val=' + JSON.stringify(value);
    $.ajax({
    type: "POST",
    url:  put_url,
    data: put_data,
    //success: function(data,status){ console.log(data,status); },
    //dataType: 'json'
    });
  });
  </script>

  </head>

  <body>

    <div id='debug'></div>

  </body>

  </html>