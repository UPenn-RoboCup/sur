<!DOCTYPE html>
<!--HTML5 doctype-->
<html lang="en">
     
<head>
  <title>SUR Commander</title>
  <meta charset="utf-8">
  
  <script>
  /* Setup the websocket connection */
  var op_port = 9001;
  var op_ws;
  document.addEventListener( "DOMContentLoaded", function(){
    var host = window.document.location.host.replace(/:.*/, '');
    if( host.length==0 ){ host = "localhost"; }
    var URL = window.URL || window.webkitURL;
    var op_host = 'ws://' + host + ':' + op_port;
    console.log('Starting connection...')
    op_ws = new WebSocket(op_host);
    console.log(op_host);
    op_ws.open = function(e){
      console.log('connected!')
    }
    op_ws.onerror = function(e) {
      console.log('error',e)
    }
    op_ws.onclose = function(e) {
      console.log('close',e)
    }
    /* Grab messages from the operator */
  	op_ws.onmessage = function(e){
  		if(typeof e.data === "string"){
        var op_data   = JSON.parse(e.data)
        var recv_time = e.timeStamp/1e6;
        var latency   = recv_time - fr_metadata.t
  			console.log('Operator Latency: '+latency*1000+'ms')
        console.log(data);
  			return;
  		}
    }; //onmessage
    
  });
  </script>

</head>

<body>

  <div id='debug'></div>

</body>

</html>